# 🔐 去中心化借贷平台质押流程时序图

本时序图展示了用户在去中心化借贷平台中，从发起质押到解除质押的完整链上交互过程。

---

## 🧭 流程说明

1. 用户通过前端界面连接钱包。
2. 用户选择质押资产并授权智能合约进行锁定。
3. 智能合约通过预言机查询资产价格，计算抵押价值。
4. 用户可以基于抵押资产发起借款。
5. 用户归还借款后可解除质押，资产返还到钱包。

---

## 🧩 Mermaid 时序图

```mermaid
sequenceDiagram
    participant 用户
    participant 前端UI
    participant 钱包
    participant 智能合约
    participant 预言机

    用户 ->> 前端UI: 打开平台，选择质押资产
    前端UI ->> 钱包: 请求连接链上钱包
    钱包 -->> 前端UI: 钱包连接成功

    用户 ->> 前端UI: 确认质押资产与数量
    前端UI ->> 钱包: 发起授权请求（Approve）
    钱包 -->> 前端UI: 授权成功

    前端UI ->> 智能合约: 调用质押函数（资产类型、数量）
    智能合约 ->> 钱包: 扣除并锁定用户质押资产
    钱包 -->> 智能合约: 转移资产成功

    智能合约 ->> 预言机: 获取资产实时价格
    预言机 -->> 智能合约: 返回价格数据
    智能合约 ->> 智能合约: 计算抵押价值与可借额度
    智能合约 ->> 前端UI: 返回质押成功信息（抵押率、借贷上限）

    用户 ->> 前端UI: 选择借出资产
    前端UI ->> 智能合约: 发起借款请求
    智能合约 ->> 钱包: 向用户钱包转出借款资产

    用户 ->> 前端UI: 发起还款（含利息）
    前端UI ->> 智能合约: 调用还款函数
    智能合约 ->> 智能合约: 更新还款状态与抵押比例

    用户 ->> 前端UI: 申请解除质押
    前端UI ->> 智能合约: 调用解除质押函数
    智能合约 ->> 钱包: 释放锁定资产
    钱包 -->> 用户: 归还质押资产
